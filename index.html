<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Codebase Ingest Tool</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öôÔ∏è</text></svg>">

    <link rel="stylesheet" href="style.css">
    <!-- Removed Google Fonts for simplicity, add back if desired -->

</head>
<body>

    <header>
        <h1><span class="icon">‚öôÔ∏è</span>Codebase Ingest Tool</h1>
    </header>

    <main>
        <!-- Control Panel -->
        <div class="controls-panel card">
            <!-- Row 1: Input Source -->
            <div class="control-row">
                <label class="control-label">Input Source:</label>
                <div class="radio-group">
                    <input type="radio" id="modeLocal" name="inputMode" value="local" checked>
                    <label for="modeLocal" class="radio-label">Local Folder</label>
                    <input type="radio" id="modeUrl" name="inputMode" value="url">
                    <label for="modeUrl" class="radio-label">Git URL</label>
                </div>
            </div>

            <!-- Row 2: Source Specific Inputs -->
            <div class="control-row source-input-row">
                <!-- Local Folder Input Section -->
                <div id="localModeSection" class="input-section">
                    <label for="folderInput" class="button primary">Select Folder</label>
                    <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;">
                    <span id="localStatus" class="status-text">No folder selected.</span>
                </div>

                <!-- URL Input Section -->
                <div id="urlModeSection" class="input-section" style="display: none;">
                    <input type="url" id="urlInput" placeholder="e.g., https://github.com/owner/repository">
                    <button id="fetchUrlButton" class="button primary">Fetch Repo</button>
                    <span id="urlStatus" class="status-text">Enter public GitHub URL.</span>
                </div>
            </div>

             <!-- Separator -->
             <hr class="control-separator">

            <!-- Row 3: Filters -->
            <div class="control-row filter-row">
                 <label class="control-label filter-label">Filter:</label>
                 <div class="filter-group pattern-filter">
                      <select id="filterMode">
                          <option value="Exclude" selected>Exclude</option>
                          <option value="Include">Include</option>
                      </select>
                      <input type="text" id="filterPatterns" placeholder="Patterns (e.g., *.md, build/)">
                 </div>
                 <div class="filter-group size-filter">
                      <label for="maxSizeSlider">Max Size: <span id="maxSizeValue">500 KB</span></label>
                      <div class="slider-container">
                           <input type="range" id="maxSizeSlider" min="0" max="102400" step="100" value="500">
                      </div>
                 </div>
            </div>

            <!-- Processing Status Area -->
             <div id="finalStatusDisplay" class="status-final">
                   <span id="finalStatus" class="status-text"></span>
             </div>

        </div> <!-- End controls-panel -->

        <!-- Results Area -->
        <div id="resultsArea" class="results-panel card" style="display: none;">
             <div class="results-header">
                 <h2>Ingested Output</h2>
                 <div class="results-actions">
                      <button id="copyOutputButton" class="button secondary" disabled>
                           <span class="icon">üìã</span> Copy Output
                      </button>
                      <button id="downloadTxtButton" class="button secondary" disabled>
                           <span class="icon">üíæ</span> Download (.txt)
                      </button>
                      <span id="downloadStatus" class="status-text"></span>
                 </div>
             </div>
             <pre id="output"><code class="language-plaintext"></code></pre>
        </div>

    </main>

    <script src="script.js"></script>

</body>
</html>